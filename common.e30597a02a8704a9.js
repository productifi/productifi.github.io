"use strict";(self.webpackChunkproductify=self.webpackChunkproductify||[]).push([[592],{2623:(I,o,s)=>{s.d(o,{N:()=>d});var u=s(5619),e=s(9397),p=s(7398),n=s(9212),c=s(1474);let d=(()=>{class i{constructor(t){this.http=t,this.apiUrl="/api/v1/carts",this.cart$=new u.X(null),this.userId=null}setUserId(t){this.userId=t}getCart(){if(!this.userId)throw new Error("User ID not set");return this.http.get(`${this.apiUrl}/${this.userId}`).pipe((0,e.b)(t=>this.cart$.next(t)))}addItem(t,r){if(!this.userId)throw new Error("User ID not set");return this.http.post(`${this.apiUrl}/${this.userId}/items`,{productId:t,quantity:r}).pipe((0,e.b)(h=>this.cart$.next(h)))}updateItem(t,r){if(!this.userId)throw new Error("User ID not set");return this.http.put(`${this.apiUrl}/${this.userId}/items/${t}`,{quantity:r}).pipe((0,e.b)(h=>this.cart$.next(h)))}removeItem(t){if(!this.userId)throw new Error("User ID not set");return this.http.delete(`${this.apiUrl}/${this.userId}/items/${t}`).pipe((0,e.b)(r=>this.cart$.next(r)))}clearCart(){if(!this.userId)throw new Error("User ID not set");return this.http.delete(`${this.apiUrl}/${this.userId}`).pipe((0,e.b)(()=>this.cart$.next(null)))}getCartObservable(){return this.cart$.asObservable()}add(t){t.productId&&t.quantity&&this.addItem(t.productId,t.quantity).subscribe()}remove(t){this.removeItem(t).subscribe()}clear(){this.clearCart().subscribe()}total(){const t=this.cart$.getValue();return t?t.totalAmount:0}get items$(){return this.cart$.pipe((0,p.U)(t=>t?.items||[]))}static{this.\u0275fac=function(r){return new(r||i)(n.LFG(c.eN))}}static{this.\u0275prov=n.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()}}]);