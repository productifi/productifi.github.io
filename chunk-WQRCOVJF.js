import{b as Z,c as tt}from"./chunk-JDCC6IOV.js";import{e as T,f as k}from"./chunk-73HNPCUD.js";import{k as q}from"./chunk-2FIZNI3O.js";import{b as et}from"./chunk-ABA5YDJA.js";import"./chunk-OKHWQRQO.js";import"./chunk-HXXQPCWH.js";import"./chunk-ZHDJFP5C.js";import"./chunk-QBLI2EOF.js";import{a as j,b as B,c as W,f as N,h as U}from"./chunk-JX33CUBA.js";import{a as J,c as K,f as X,g as Y}from"./chunk-I7QKGUOV.js";import"./chunk-KOH3MBIX.js";import{c as A,g as H,j as Q,s as $}from"./chunk-KU7RIE3I.js";import"./chunk-AESYL7IM.js";import{a as F,d as L,e as R}from"./chunk-4JKAHWEK.js";import"./chunk-CERUL3HZ.js";import"./chunk-5BDAPURH.js";import{W as E,ea as z,fa as G}from"./chunk-TBDOALTL.js";import{$a as m,$b as O,Fb as i,Gb as e,Lb as b,Ob as g,Qb as p,Rc as P,Sc as D,Zb as l,_b as w,_c as I,cc as v,dc as M,ec as x,gc as y,ma as S,tb as _,ua as C,va as h,vb as u,xb as V}from"./chunk-J5RJCK57.js";function nt(n,c){if(n&1&&(i(0,"div",13),l(1),e()),n&2){let o=p();m(),w(o.error)}}function rt(n,c){if(n&1){let o=b();i(0,"button",17),g("click",function(){C(o);let t=p(2);return t.searchTerm="",h(t.search())}),i(1,"mat-icon"),l(2,"close"),e()()}}function at(n,c){if(n&1){let o=b();i(0,"mat-card",14)(1,"mat-card-content")(2,"mat-form-field",5)(3,"mat-label"),l(4,"Search CSV Data"),e(),i(5,"input",15),x("ngModelChange",function(t){C(o);let a=p();return M(a.searchTerm,t)||(a.searchTerm=t),h(t)}),g("input",function(){C(o);let t=p();return h(t.search())}),e(),_(6,rt,3,0,"button",16),e()()()}if(n&2){let o=p();m(5),v("ngModel",o.searchTerm),m(),u("ngIf",o.searchTerm)}}function it(n,c){if(n&1&&(i(0,"th",24),l(1),e()),n&2){let o=c.$implicit;m(),w(o)}}function ot(n,c){if(n&1&&(i(0,"td"),l(1),e()),n&2){let o=c.$implicit,r=p().$implicit;m(),w(r[o])}}function lt(n,c){if(n&1&&(i(0,"tr"),_(1,ot,2,1,"td",25),e()),n&2){let o=c.index,r=p(2);V("alternate",o%2===1),m(),u("ngForOf",r.columns)}}function ct(n,c){if(n&1){let o=b();i(0,"mat-card",18)(1,"mat-card-header")(2,"mat-card-title"),l(3),e()(),i(4,"mat-card-content")(5,"div",19)(6,"table",20)(7,"thead")(8,"tr"),_(9,it,2,1,"th",21),e()(),i(10,"tbody"),_(11,lt,2,3,"tr",22),e()()(),i(12,"button",23),g("click",function(){C(o);let t=p();return h(t.downloadCsv())}),i(13,"mat-icon"),l(14,"download"),e(),l(15," Download CSV "),e()()()}if(n&2){let o=p();m(3),O("Data (",o.filteredData.length," rows)"),m(6),u("ngForOf",o.columns),m(2),u("ngForOf",o.filteredData)}}var Dt=(()=>{let c=class c{constructor(){this.csvInput="",this.csvData=[],this.columns=[],this.filteredData=[],this.searchTerm="",this.error=""}parseCsv(){this.error="";try{let r=this.csvInput.trim().split(`
`);if(r.length===0){this.error="No data to parse";return}this.columns=this.parseRow(r[0]),this.csvData=r.slice(1).map(t=>{let a=this.parseRow(t),s={};return this.columns.forEach((d,f)=>{s[d]=a[f]||""}),s}),this.filteredData=[...this.csvData]}catch(r){this.error=`Parse error: ${r.message}`}}parseRow(r){let t=[],a="",s=!1;for(let d=0;d<r.length;d++){let f=r[d];f==='"'?s=!s:f===","&&!s?(t.push(a.trim()),a=""):a+=f}return t.push(a.trim()),t}search(){let r=this.searchTerm.toLowerCase();if(!r){this.filteredData=[...this.csvData];return}this.filteredData=this.csvData.filter(t=>Object.values(t).some(a=>String(a).toLowerCase().includes(r)))}downloadCsv(){if(this.csvData.length===0)return;let r=[this.columns.join(","),...this.csvData.map(d=>this.columns.map(f=>`"${String(d[f]).replace(/"/g,'""')}"`).join(","))].join(`
`),t=new Blob([r],{type:"text/csv"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="data.csv",s.click(),URL.revokeObjectURL(a)}clearData(){this.csvInput="",this.csvData=[],this.columns=[],this.filteredData=[],this.error=""}};c.\u0275fac=function(t){return new(t||c)},c.\u0275cmp=S({type:c,selectors:[["app-csv-viewer"]],standalone:!0,features:[y],decls:29,vars:4,consts:[[1,"container"],["color","primary"],["mat-icon-button","","disabled",""],[1,"content"],[1,"input-card"],["appearance","outline",1,"full-width"],["matInput","","rows","6",3,"ngModelChange","ngModel"],[1,"button-group"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],["class","error",4,"ngIf"],["class","search-card",4,"ngIf"],["class","table-card",4,"ngIf"],[1,"error"],[1,"search-card"],["matInput","","placeholder","Search across all columns...",3,"ngModelChange","input","ngModel"],["mat-icon-button","","matSuffix","",3,"click",4,"ngIf"],["mat-icon-button","","matSuffix","",3,"click"],[1,"table-card"],[1,"table-wrapper"],[1,"data-table"],["class","table-header",4,"ngFor","ngForOf"],[3,"alternate",4,"ngFor","ngForOf"],["mat-raised-button","","color","accent",1,"download-btn",3,"click"],[1,"table-header"],[4,"ngFor","ngForOf"]],template:function(t,a){t&1&&(i(0,"div",0)(1,"mat-toolbar",1)(2,"button",2)(3,"mat-icon"),l(4,"table_chart"),e()(),i(5,"span"),l(6,"CSV Viewer & Search"),e()(),i(7,"div",3)(8,"mat-card",4)(9,"mat-card-header")(10,"mat-card-title"),l(11,"Import CSV Data"),e()(),i(12,"mat-card-content")(13,"mat-form-field",5)(14,"mat-label"),l(15,"Paste CSV Data"),e(),i(16,"textarea",6),x("ngModelChange",function(d){return M(a.csvInput,d)||(a.csvInput=d),d}),e()(),i(17,"div",7)(18,"button",8),g("click",function(){return a.parseCsv()}),i(19,"mat-icon"),l(20,"source"),e(),l(21," Parse CSV "),e(),i(22,"button",9),g("click",function(){return a.clearData()}),i(23,"mat-icon"),l(24,"delete"),e(),l(25," Clear "),e()(),_(26,nt,2,1,"div",10),e()(),_(27,at,7,2,"mat-card",11)(28,ct,16,3,"mat-card",12),e()()),t&2&&(m(16),v("ngModel",a.csvInput),m(10),u("ngIf",a.error),m(),u("ngIf",a.csvData.length>0),m(),u("ngIf",a.filteredData.length>0))},dependencies:[I,P,D,$,A,H,Q,G,z,k,T,R,F,L,Y,X,J,K,tt,Z,U,j,W,N,B,q,et,E],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}mat-toolbar[_ngcontent-%COMP%]{margin-bottom:1rem}.content[_ngcontent-%COMP%]{padding:1rem;flex:1;overflow-y:auto}.input-card[_ngcontent-%COMP%], .search-card[_ngcontent-%COMP%], .table-card[_ngcontent-%COMP%]{margin-bottom:1.5rem}.full-width[_ngcontent-%COMP%]{width:100%}.button-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:1rem;flex-wrap:wrap}.error[_ngcontent-%COMP%]{color:#d32f2f;margin-top:1rem;padding:.5rem;background-color:#ffebee;border-radius:4px}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;margin-bottom:1rem}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table-header[_ngcontent-%COMP%]{background-color:#673ab7;color:#fff;padding:1rem;text-align:left;font-weight:500;border:1px solid #ddd}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;border:1px solid #ddd;max-width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr.alternate[_ngcontent-%COMP%]{background-color:#fafafa}.download-btn[_ngcontent-%COMP%]{margin-top:1rem}"]});let n=c;return n})();export{Dt as CsvViewerComponent};
