import{e as T,f as E}from"./chunk-73HNPCUD.js";import{a as q,b as A}from"./chunk-OKHWQRQO.js";import{a as L,b as $,d as B}from"./chunk-NXVXFKC4.js";import"./chunk-ZHDJFP5C.js";import"./chunk-QBLI2EOF.js";import"./chunk-UMZHJLK3.js";import{a as D,h as j}from"./chunk-JX33CUBA.js";import"./chunk-KU7RIE3I.js";import"./chunk-AESYL7IM.js";import{a as V,c as I,d as U,e as z}from"./chunk-4JKAHWEK.js";import"./chunk-CERUL3HZ.js";import"./chunk-5BDAPURH.js";import{fa as F}from"./chunk-TBDOALTL.js";import{$a as d,$b as P,Fb as n,Gb as o,Hb as b,Lb as h,Ob as m,Qb as p,Rc as R,Sc as k,Ya as M,Zb as r,_b as _,_c as S,f as v,gc as O,ia as C,ma as w,tb as x,ua as g,va as f,vb as l,xc as y}from"./chunk-J5RJCK57.js";function N(a,s){a&1&&(n(0,"div",12)(1,"mat-icon",13),r(2,"warning"),o(),n(3,"p"),r(4,"Your browser does not support video recording. Please use Chrome, Firefox, Safari, or Edge."),o()())}function Y(a,s){if(a&1&&(n(0,"div",14)(1,"div",15),b(2,"div",16),n(3,"span"),r(4,"Recording in Progress"),o(),n(5,"span",17),r(6),o()()()),a&2){let c=p();d(6),_(c.currentRecordingTime)}}function G(a,s){if(a&1){let c=h();n(0,"div",18)(1,"button",19),m("click",function(){g(c);let i=p();return f(i.downloadAllRecordings())}),n(2,"mat-icon"),r(3,"file_download"),o(),r(4," Download All "),o(),n(5,"button",20),m("click",function(){g(c);let i=p();return f(i.clearAll())}),n(6,"mat-icon"),r(7,"delete_outline"),o(),r(8," Clear All "),o()()}}function H(a,s){a&1&&(n(0,"div",21)(1,"mat-icon"),r(2,"video_library"),o(),n(3,"p"),r(4,"No recordings yet. Start recording to create your first video!"),o()())}function J(a,s){if(a&1){let c=h();n(0,"div",22)(1,"div",23)(2,"div",24)(3,"h3"),r(4,"Video Preview"),o(),n(5,"button",25),m("click",function(){g(c);let i=p();return f(i.closePreview())}),n(6,"mat-icon"),r(7,"close"),o()()(),b(8,"video",26),o()()}if(a&2){let c=p();d(8),l("src",c.videoPreviewUrl,M)}}function K(a,s){if(a&1){let c=h();n(0,"mat-list-item",30)(1,"div",31)(2,"div",32),r(3),o(),n(4,"div",33)(5,"mat-icon"),r(6,"schedule"),o(),n(7,"span"),r(8),o()()(),n(9,"div",34)(10,"button",35),m("click",function(){let i=g(c).$implicit,e=p(2);return f(e.playRecording(i))}),n(11,"mat-icon"),r(12,"play_circle"),o()(),n(13,"button",36),m("click",function(){let i=g(c).$implicit,e=p(2);return f(e.downloadRecording(i))}),n(14,"mat-icon"),r(15,"download"),o()(),n(16,"button",37),m("click",function(){let i=g(c).$implicit,e=p(2);return f(e.deleteRecording(i.id))}),n(17,"mat-icon"),r(18,"delete"),o()()()()}if(a&2){let c=s.$implicit;d(3),_(c.name),d(5),_(c.duration)}}function Q(a,s){if(a&1&&(n(0,"div",27)(1,"h3",28),r(2),o(),n(3,"mat-list"),x(4,K,19,2,"mat-list-item",29),o()()),a&2){let c=p();d(2),P("Your Recordings (",c.recordings.length,")"),d(2),l("ngForOf",c.recordings)}}var gt=(()=>{let s=class s{constructor(){this.isRecording=!1,this.recordings=[],this.currentRecordingTime="00:00",this.browserSupported=!0,this.videoPreviewUrl=null,this.mediaRecorder=null,this.videoChunks=[],this.recordingTimer=null,this.recordingSeconds=0,this.stream=null,this.cdr=C(y)}ngOnInit(){this.checkBrowserSupport()}ngOnDestroy(){this.mediaRecorder&&this.mediaRecorder.state!=="inactive"&&this.mediaRecorder.stop(),this.recordingTimer&&clearInterval(this.recordingTimer),this.stream&&this.stream.getTracks().forEach(t=>t.stop()),this.videoPreviewUrl&&URL.revokeObjectURL(this.videoPreviewUrl)}checkBrowserSupport(){let t=navigator.mediaDevices?.getUserMedia,i=typeof MediaRecorder<"u";this.browserSupported=!!t&&i}startRecording(){return v(this,null,function*(){try{this.stream=yield navigator.mediaDevices.getUserMedia({audio:!0,video:{width:1280,height:720}}),this.mediaRecorder=new MediaRecorder(this.stream,{mimeType:"video/webm;codecs=vp9,opus"}),this.videoChunks=[],this.recordingSeconds=0,this.currentRecordingTime="00:00",this.isRecording=!0,this.mediaRecorder.ondataavailable=t=>{this.videoChunks.push(t.data)},this.mediaRecorder.onstop=()=>{this.handleRecordingStop()},this.mediaRecorder.start(),this.startTimer()}catch(t){console.error("Error accessing camera/microphone:",t),alert("Unable to access camera/microphone. Please check your permissions.")}})}stopRecording(){this.mediaRecorder&&this.isRecording&&(clearInterval(this.recordingTimer),this.isRecording=!1,this.stream&&this.stream.getTracks().forEach(t=>t.stop()),this.mediaRecorder.stop())}startTimer(){this.recordingTimer=setInterval(()=>{this.recordingSeconds++,this.currentRecordingTime=this.formatTime(this.recordingSeconds)},1e3)}formatTime(t){let i=Math.floor(t/60),e=t%60;return`${String(i).padStart(2,"0")}:${String(e).padStart(2,"0")}`}handleRecordingStop(){let t=new Blob(this.videoChunks,{type:"video/webm"}),i=URL.createObjectURL(t),e={id:Date.now(),name:`Video ${new Date().toLocaleTimeString()}`,duration:this.currentRecordingTime,url:i,blob:t,timestamp:new Date};this.recordings.unshift(e),this.videoChunks=[],this.cdr.detectChanges()}playRecording(t){this.videoPreviewUrl=t.url}closePreview(){this.videoPreviewUrl=null}downloadRecording(t){let i=t.url,e=document.createElement("a");e.href=i,e.download=t.name+".webm",document.body.appendChild(e),e.click(),document.body.removeChild(e)}downloadAllRecordings(){this.recordings.forEach((t,i)=>{setTimeout(()=>{let e=t.url,u=document.createElement("a");u.href=e,u.download=`video_${i+1}_${t.name}.webm`,document.body.appendChild(u),u.click(),document.body.removeChild(u)},i*500)})}deleteRecording(t){let i=this.recordings.findIndex(e=>e.id===t);i>-1&&(URL.revokeObjectURL(this.recordings[i].url),this.recordings.splice(i,1))}clearAll(){confirm("Are you sure you want to delete all recordings?")&&(this.recordings.forEach(t=>URL.revokeObjectURL(t.url)),this.recordings=[])}};s.\u0275fac=function(i){return new(i||s)},s.\u0275cmp=w({type:s,selectors:[["app-video-recorder"]],standalone:!0,features:[O],decls:17,vars:10,consts:[[1,"recorder-card"],[1,"recorder-body"],["class","browser-support",4,"ngIf"],[1,"recording-controls"],["class","recording-status",4,"ngIf"],[1,"mic-section"],["mat-fab","","matTooltip","Start/Stop Video Recording",1,"mic-button",3,"click","color","disabled"],[1,"mic-label"],["class","quick-actions",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","video-preview-modal",4,"ngIf"],["class","recordings-list",4,"ngIf"],[1,"browser-support"],[1,"warning-icon"],[1,"recording-status"],[1,"recording-indicator"],[1,"recording-dot"],[1,"timer"],[1,"quick-actions"],["mat-raised-button","","color","primary","matTooltip","Download all videos",3,"click"],["mat-raised-button","","color","warn","matTooltip","Delete all recordings",3,"click"],[1,"empty-state"],[1,"video-preview-modal"],[1,"video-preview-container"],[1,"preview-header"],["mat-icon-button","",1,"close-btn",3,"click"],["controls","",1,"preview-video",3,"src"],[1,"recordings-list"],[1,"recordings-title"],["class","recording-item",4,"ngFor","ngForOf"],[1,"recording-item"],[1,"recording-info"],[1,"recording-name"],[1,"recording-duration"],[1,"recording-actions"],["mat-icon-button","","matTooltip","Play Recording",1,"play-btn",3,"click"],["mat-icon-button","","matTooltip","Download Recording",1,"download-btn",3,"click"],["mat-icon-button","","matTooltip","Delete Recording",1,"delete-btn",3,"click"]],template:function(i,e){i&1&&(n(0,"mat-card",0)(1,"h1"),r(2,"Video Recorder"),o(),n(3,"div",1),x(4,N,5,0,"div",2),n(5,"div",3),x(6,Y,7,1,"div",4),n(7,"div",5)(8,"button",6),m("click",function(){return e.isRecording?e.stopRecording():e.startRecording()}),n(9,"mat-icon"),r(10),o()(),n(11,"span",7),r(12),o()(),x(13,G,9,0,"div",8),o(),x(14,H,5,0,"div",9)(15,J,9,1,"div",10)(16,Q,5,2,"div",11),o()()),i&2&&(d(4),l("ngIf",!e.browserSupported),d(2),l("ngIf",e.isRecording),d(2),l("color",e.isRecording?"warn":"primary")("disabled",!e.browserSupported),d(2),_(e.isRecording?"stop":"videocam"),d(2),_(e.isRecording?"Stop Recording":"Start Recording"),d(),l("ngIf",e.recordings.length>0),d(),l("ngIf",e.recordings.length===0&&!e.isRecording),d(),l("ngIf",e.videoPreviewUrl),d(),l("ngIf",e.recordings.length>0))},dependencies:[S,R,k,j,D,z,V,U,I,E,T,F,B,L,$,A,q],styles:[".recorder-card[_ngcontent-%COMP%]{max-width:900px;margin:24px auto;padding:16px}.recorder-body[_ngcontent-%COMP%]{padding:24px;display:flex;flex-direction:column;gap:24px}.gradient-toolbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea33,#764ba233)!important;-webkit-backdrop-filter:blur(15px)!important;backdrop-filter:blur(15px)!important;border-bottom:1px solid rgba(255,255,255,.15)!important;color:#fff!important;box-shadow:0 8px 32px #1f26875e!important;border-radius:12px!important;margin:-16px -16px 0!important;width:calc(100% + 32px)!important;padding:16px 24px!important;display:flex!important;align-items:center!important;font-size:20px!important;font-weight:500!important}.browser-support[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:#f4433626;border:1px solid rgba(244,67,54,.3);border-radius:8px;color:#f44336}.warning-icon[_ngcontent-%COMP%]{font-size:20px!important;width:20px!important;height:20px!important;flex-shrink:0}.browser-support[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px}.recording-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px;padding:24px;background:#ffffff0d;border:1px solid rgba(255,255,255,.1);border-radius:12px}.recording-status[_ngcontent-%COMP%]{width:100%}.recording-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:12px 20px;background:#f4433633;border:1px solid rgba(244,67,54,.4);border-radius:8px;color:#f44336;font-weight:600;animation:_ngcontent-%COMP%_pulse 1s infinite}.recording-dot[_ngcontent-%COMP%]{width:12px;height:12px;background:#f44336;border-radius:50%;animation:_ngcontent-%COMP%_blink .6s infinite}.timer[_ngcontent-%COMP%]{margin-left:auto;font-family:Courier New,monospace;font-size:16px;font-weight:700;color:#f44336}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:.5}}@keyframes _ngcontent-%COMP%_pulse{0%,to{box-shadow:0 0 #f4433666}50%{box-shadow:0 0 0 6px #f4433600}}.mic-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px}.mic-button[_ngcontent-%COMP%]{width:80px!important;height:80px!important;font-size:32px!important;transition:all .3s ease!important}.mic-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.1)!important;box-shadow:0 8px 24px #667eea66!important}.mic-button[_ngcontent-%COMP%]:disabled{opacity:.5!important;cursor:not-allowed!important}.mic-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#fffc;text-align:center}.quick-actions[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;width:100%}.quick-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:140px;transition:all .3s ease}.quick-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 24px #667eea4d}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:16px;padding:40px;text-align:center;color:#fff9}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px!important;width:48px!important;height:48px!important;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px}.video-preview-modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000e6;display:flex;align-items:center;justify-content:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.video-preview-container[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.2);border-radius:16px;padding:20px;max-width:90%;max-height:90%;display:flex;flex-direction:column;gap:16px}.preview-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;color:#fff}.preview-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600}.close-btn[_ngcontent-%COMP%]{color:#fff;transition:all .3s ease}.close-btn[_ngcontent-%COMP%]:hover{background:#f4433633;color:#f44336}.preview-video[_ngcontent-%COMP%]{max-width:100%;max-height:70vh;border-radius:8px;background:#000}.recordings-list[_ngcontent-%COMP%]{width:100%}.recordings-title[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:600;color:#ffffffe6}.recording-item[_ngcontent-%COMP%]{background:#ffffff0d!important;border:1px solid rgba(255,255,255,.1)!important;border-radius:8px!important;margin-bottom:12px!important;padding:16px!important;display:flex!important;justify-content:space-between!important;align-items:center!important;transition:all .3s ease!important;gap:12px!important;height:auto!important}.recording-item[_ngcontent-%COMP%]   .mat-list-item-content[_ngcontent-%COMP%]{height:auto!important;padding:0!important}.recording-item[_ngcontent-%COMP%]:hover{background:#667eea1a!important;border-color:#667eea4d!important;box-shadow:0 4px 16px #667eea33!important}.recording-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;flex:1}.recording-name[_ngcontent-%COMP%]{font-weight:500;color:#ffffffe6;font-size:14px}.recording-duration[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:12px;color:#fff9}.recording-duration[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px!important;width:14px!important;height:14px!important}.recording-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-left:16px;align-items:center}.recording-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex!important;align-items:center!important;justify-content:center!important;min-width:44px!important;min-height:44px!important;width:44px!important;height:44px!important;padding:0!important;color:#ffffffb3!important;transition:all .3s ease!important;opacity:1!important;visibility:visible!important}.recording-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .recording-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .recording-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1!important}.recording-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{display:block!important;font-size:24px!important;width:24px!important;height:24px!important;line-height:24px!important;color:inherit!important}.play-btn[_ngcontent-%COMP%]{color:#4caf50!important}.play-btn[_ngcontent-%COMP%]:hover{background:#4caf5033!important}.download-btn[_ngcontent-%COMP%]{color:#2196f3!important}.download-btn[_ngcontent-%COMP%]:hover{background:#2196f333!important}.delete-btn[_ngcontent-%COMP%]{color:#f44336!important}.delete-btn[_ngcontent-%COMP%]:hover{background:#f4433633!important}@media (max-width: 600px){.recorder-body[_ngcontent-%COMP%]{gap:16px}.recording-controls[_ngcontent-%COMP%]{padding:16px}.mic-button[_ngcontent-%COMP%]{width:70px!important;height:70px!important;font-size:28px!important}.quick-actions[_ngcontent-%COMP%]{flex-direction:column;width:100%}.quick-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.recording-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.recording-info[_ngcontent-%COMP%]{width:100%}.recording-actions[_ngcontent-%COMP%]{margin-left:0;width:100%;justify-content:flex-start}.recording-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:40px!important;width:40px!important;height:40px!important}}"]});let a=s;return a})();export{gt as VideoRecorderComponent};
