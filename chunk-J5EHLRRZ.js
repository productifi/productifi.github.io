import{b as H,c as W,d as K}from"./chunk-HMM5WEMA.js";import{b as ne,c as oe}from"./chunk-JDCC6IOV.js";import{e as N,f as U}from"./chunk-73HNPCUD.js";import{k as Y}from"./chunk-2FIZNI3O.js";import{a as ie,b as re}from"./chunk-OKHWQRQO.js";import"./chunk-ZHDJFP5C.js";import"./chunk-QBLI2EOF.js";import{a as L,c as J,h as $}from"./chunk-JX33CUBA.js";import{a as Z,f as ee,g as te}from"./chunk-I7QKGUOV.js";import"./chunk-KOH3MBIX.js";import{c as z,g as D,j as G,s as A}from"./chunk-KU7RIE3I.js";import"./chunk-AESYL7IM.js";import{a as F,d as j,e as B}from"./chunk-4JKAHWEK.js";import"./chunk-CERUL3HZ.js";import"./chunk-5BDAPURH.js";import{ea as Q,fa as X}from"./chunk-TBDOALTL.js";import{$a as c,Fb as r,Gb as n,Lb as h,Ob as g,Qb as p,Qc as S,Rc as q,Sc as k,Xc as O,Yc as T,Zb as a,_b as d,_c as V,a as y,cc as P,dc as I,ec as E,gc as R,lc as b,ma as v,mc as w,tb as f,ua as x,va as C,vb as m}from"./chunk-J5RJCK57.js";function ae(o,s){if(o&1&&(r(0,"div",13),a(1),n()),o&2){let t=p();c(),d(t.parseError)}}function le(o,s){if(o&1&&(r(0,"p"),a(1),n()),o&2){let t=p(2);c(),d(t.collection.info.description)}}function ce(o,s){if(o&1){let t=h();r(0,"mat-card",17),g("click",function(){let i=x(t).$implicit,l=p(2);return C(l.selectRequest(i.request))}),r(1,"mat-card-content")(2,"span",18),a(3),n(),r(4,"span",19),a(5),n(),r(6,"span",20),a(7),n()()()}if(o&2){let t=s.$implicit,e=p(2);c(2),m("ngClass",t.request.method.toLowerCase()),c(),d(t.request.method),c(2),d(t.request.name),c(2),d(e.getRequestUrl(t.request))}}function se(o,s){if(o&1&&(r(0,"mat-tab",14)(1,"div",5)(2,"h3"),a(3),n(),f(4,le,2,1,"p",15)(5,ce,8,4,"mat-card",16),n()()),o&2){let t=p();c(3),d(t.collection.info.name),c(),m("ngIf",t.collection.info.description),c(),m("ngForOf",t.collection.item)}}function me(o,s){if(o&1&&(r(0,"div")(1,"p")(2,"strong"),a(3,"Headers:"),n()(),r(4,"pre",25),a(5),b(6,"json"),n()()),o&2){let t=p(2);c(5),d(w(6,1,t.selectedRequest.headers))}}function de(o,s){if(o&1&&(r(0,"div")(1,"p")(2,"strong"),a(3,"Body:"),n()(),r(4,"pre",25),a(5),n()()),o&2){let t=p(2);c(5),d(t.selectedRequest.body)}}function pe(o,s){o&1&&(r(0,"div")(1,"p",26)(2,"em"),a(3,"No request body"),n()()())}function ue(o,s){if(o&1){let t=h();r(0,"mat-tab",21)(1,"div",5)(2,"h3"),a(3),n(),r(4,"mat-card",22)(5,"mat-card-content")(6,"p")(7,"strong"),a(8,"Method:"),n(),r(9,"span",18),a(10),n()(),r(11,"p")(12,"strong"),a(13,"URL:"),n()(),r(14,"pre",23),a(15),n(),f(16,me,7,3,"div",15),b(17,"keyvalue"),f(18,de,6,1,"div",15)(19,pe,4,0,"div",15),n()(),r(20,"button",24),g("click",function(){x(t);let i=p();return C(i.copyRequest())}),r(21,"mat-icon"),a(22,"content_copy"),n(),a(23," Copy "),n()()()}if(o&2){let t=p();c(3),d(t.selectedRequest.name),c(6),m("ngClass",t.selectedRequest.method.toLowerCase()),c(),d(t.selectedRequest.method),c(5),d(t.getRequestUrl(t.selectedRequest)),c(),m("ngIf",t.selectedRequest.headers&&w(17,7,t.selectedRequest.headers).length>0),c(2),m("ngIf",t.selectedRequest.body&&t.selectedRequest.body!==""),c(),m("ngIf",!t.selectedRequest.body||t.selectedRequest.body==="")}}function fe(o,s){if(o&1){let t=h();r(0,"button",27),g("click",function(){x(t);let i=p();return C(i.downloadCollection())}),r(1,"mat-icon"),a(2,"download"),n(),a(3," Download Collection "),n()}}var Fe=(()=>{let s=class s{constructor(){this.jsonInput="",this.collection=null,this.selectedRequest=null,this.parseError="",this.displayedColumns=["name","method","url"]}ngOnInit(){this.jsonInput=JSON.stringify({info:{name:"Sample Collection"},item:[{name:"Get Users",request:{name:"Get Users",method:"GET",url:"https://jsonplaceholder.typicode.com/users"}}]},null,2)}parseCollection(){this.parseError="";try{let e=JSON.parse(this.jsonInput);this.collection=this.normalizeCollection(e)}catch(e){this.parseError=`Invalid JSON: ${e.message}`}}normalizeCollection(e){let i=(e.item||[]).map(l=>({name:l.name,request:this.normalizeRequest(l.request)}));return{info:e.info||{name:"Collection"},item:i}}normalizeRequest(e){let i="";typeof e.url=="string"?i=e.url:e.url?.raw?i=e.url.raw:e.url&&typeof e.url=="object"&&(i=this.buildUrl(e.url));let l=this.parseHeaders(e.header),u=this.parseBody(e.body);return{name:e.name||"Request",method:e.method||"GET",url:i,headers:l,body:u}}buildUrl(e){if(!e)return"";let i=e.protocol?e.protocol+"://":"https://",l=(e.host?e.host.join("."):"")||"example.com",u=e.path?"/"+e.path.join("/"):"",_=e.query?"?"+e.query.map(M=>`${M.key}=${M.value}`).join("&"):"";return i+l+u+_}parseHeaders(e){let i={};if(Array.isArray(e))e.forEach(l=>{l.disabled||(i[l.key]=l.value)});else if(typeof e=="object")return e;return i}parseBody(e){return e?typeof e=="string"?e:e.raw?e.raw:e.formdata?JSON.stringify(e.formdata,null,2):e.urlencoded?e.urlencoded.map(i=>`${i.key}=${i.value}`).join("&"):JSON.stringify(e,null,2):""}selectRequest(e){this.selectedRequest=y({},e)}getRequestUrl(e){return e?typeof e.url=="string"?e.url:e.url?.raw||"":""}copyRequest(){if(!this.selectedRequest)return;let e=`${this.selectedRequest.method} ${this.getRequestUrl(this.selectedRequest)}`;navigator.clipboard.writeText(e)}downloadCollection(){if(!this.collection)return;let e=JSON.stringify(this.collection,null,2),i=new Blob([e],{type:"application/json"}),l=window.URL.createObjectURL(i),u=document.createElement("a");u.href=l,u.download=`${this.collection.info.name}.json`,u.click(),window.URL.revokeObjectURL(l)}};s.\u0275fac=function(i){return new(i||s)},s.\u0275cmp=v({type:s,selectors:[["app-postman-viewer"]],standalone:!0,features:[R],decls:21,vars:5,consts:[[1,"container"],["color","primary"],["mat-icon-button","","disabled",""],[1,"content"],["label","Import Collection"],[1,"tab-content"],["appearance","outline",1,"full-width"],["matInput","","rows","10",3,"ngModelChange","ngModel"],["mat-raised-button","","color","primary",3,"click"],["class","error",4,"ngIf"],["label","Requests",4,"ngIf"],["label","Request Details",4,"ngIf"],["mat-raised-button","","color","accent","class","download-btn",3,"click",4,"ngIf"],[1,"error"],["label","Requests"],[4,"ngIf"],["class","request-card",3,"click",4,"ngFor","ngForOf"],[1,"request-card",3,"click"],[1,"method",3,"ngClass"],[1,"name"],[1,"url"],["label","Request Details"],[1,"details-card"],[1,"url-display"],["mat-raised-button","","color","primary","matTooltip","Copy to clipboard",3,"click"],[1,"code-display"],[1,"no-data"],["mat-raised-button","","color","accent",1,"download-btn",3,"click"]],template:function(i,l){i&1&&(r(0,"div",0)(1,"mat-toolbar",1)(2,"button",2)(3,"mat-icon"),a(4,"api"),n()(),r(5,"span"),a(6,"Postman Collection Viewer"),n()(),r(7,"div",3)(8,"mat-tab-group")(9,"mat-tab",4)(10,"div",5)(11,"mat-form-field",6)(12,"mat-label"),a(13,"Paste Postman JSON Collection"),n(),r(14,"textarea",7),E("ngModelChange",function(_){return I(l.jsonInput,_)||(l.jsonInput=_),_}),n()(),r(15,"button",8),g("click",function(){return l.parseCollection()}),a(16,"Parse Collection"),n(),f(17,ae,2,1,"div",9),n()(),f(18,se,6,3,"mat-tab",10)(19,ue,24,9,"mat-tab",11),n(),f(20,fe,4,0,"button",12),n()()),i&2&&(c(14),P("ngModel",l.jsonInput),c(3),m("ngIf",l.parseError),c(),m("ngIf",l.collection),c(),m("ngIf",l.selectedRequest),c(),m("ngIf",l.collection))},dependencies:[V,S,q,k,O,T,A,z,D,G,X,Q,U,N,B,F,j,te,ee,Z,oe,ne,$,L,J,K,H,W,Y,re,ie],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}mat-toolbar[_ngcontent-%COMP%]{margin-bottom:1rem}.content[_ngcontent-%COMP%]{padding:1rem;flex:1;overflow-y:auto}.tab-content[_ngcontent-%COMP%]{padding:1rem}.full-width[_ngcontent-%COMP%]{width:100%}.error[_ngcontent-%COMP%]{color:#d32f2f;margin-top:1rem;padding:.5rem;background-color:#ffebee;border-radius:4px}.request-card[_ngcontent-%COMP%]{margin:.5rem 0;padding:1rem;cursor:pointer;transition:all .3s ease}.request-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #0003;transform:translateY(-2px)}.method[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:4px;font-weight:700;color:#fff;margin-right:1rem}.method.get[_ngcontent-%COMP%]{background-color:#4caf50}.method.post[_ngcontent-%COMP%]{background-color:#2196f3}.method.put[_ngcontent-%COMP%]{background-color:#ff9800}.method.delete[_ngcontent-%COMP%]{background-color:#f44336}.method.patch[_ngcontent-%COMP%]{background-color:#9c27b0}.name[_ngcontent-%COMP%]{font-weight:500;margin-right:1rem}.url[_ngcontent-%COMP%]{color:#666;font-size:.9rem;font-family:monospace}.details-card[_ngcontent-%COMP%]{margin:1rem 0}pre[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#333;padding:1rem;border-radius:4px;overflow-x:auto;margin:1rem 0;border:1px solid #ddd;font-family:Courier New,monospace;font-size:.9rem;word-break:break-word;white-space:pre-wrap}.url-display[_ngcontent-%COMP%]{word-break:break-all}.code-display[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}.no-data[_ngcontent-%COMP%]{color:#999;font-style:italic;padding:1rem}.download-btn[_ngcontent-%COMP%]{margin-top:1rem}h3[_ngcontent-%COMP%]{margin-top:0}"]});let o=s;return o})();export{Fe as PostmanViewerComponent};
