import{a as $}from"./chunk-KBREYECZ.js";import{c as Z}from"./chunk-LRBTW7Q7.js";import{b as Y,c as K}from"./chunk-JDCC6IOV.js";import{e as R,f as I}from"./chunk-73HNPCUD.js";import{b as X}from"./chunk-OKHWQRQO.js";import{a as q,b as Q}from"./chunk-HXXQPCWH.js";import"./chunk-ZHDJFP5C.js";import"./chunk-QBLI2EOF.js";import{a as z,h as j}from"./chunk-JX33CUBA.js";import{a as G,f as H,g as J}from"./chunk-I7QKGUOV.js";import"./chunk-KOH3MBIX.js";import{g as B,j as N,r as D,s as V,t as A}from"./chunk-KU7RIE3I.js";import"./chunk-AESYL7IM.js";import{a as F,c as L,e as U}from"./chunk-4JKAHWEK.js";import"./chunk-CERUL3HZ.js";import"./chunk-5BDAPURH.js";import{_ as E,fa as W}from"./chunk-TBDOALTL.js";import{$a as s,$b as P,Fb as t,Gb as e,Hb as x,Ob as u,Qb as O,Sc as k,Zb as i,_b as _,_c as T,ab as b,cc as S,dc as v,ec as w,f as M,gc as y,ma as C,tb as f,vb as d}from"./chunk-J5RJCK57.js";function tt(a,p){a&1&&(t(0,"div",27),x(1,"div",28),t(2,"span"),i(3,"Recording..."),e()())}function et(a,p){a&1&&(t(0,"p",33),i(1,"Final Transcript"),e())}function nt(a,p){a&1&&(t(0,"p",34),i(1,"Listening..."),e())}function it(a,p){if(a&1&&(t(0,"div",29)(1,"p",30),i(2,"Confidence: "),t(3,"strong"),i(4),e()(),f(5,et,2,0,"p",31)(6,nt,2,0,"p",32),e()),a&2){let h=O();s(4),P("",h.confidence,"%"),s(),d("ngIf",h.isFinal),s(),d("ngIf",!h.isFinal&&h.isRecording)}}function ot(a,p){a&1&&(t(0,"div",35)(1,"mat-icon",36),i(2,"warning"),e(),t(3,"p"),i(4,"Your browser does not support Speech Recognition. Please use Chrome, Edge, or Safari."),e()())}var yt=(()=>{let p=class p{constructor(r,o){this.fb=r,this.tts=o,this.voices=[],this.samples=["Hello! This is a sample text to demonstrate text to speech.","Angular makes building UIs productive and enjoyable.","Accessibility is important: provide text alternatives for audio content."],this.isSpeaking=!1,this.isRecording=!1,this.transcribedText="",this.transcript="",this.confidence=0,this.isFinal=!1,this.selectedLanguage="en-US",this.browserSupportsSpeechRecognition=null,this.form=this.fb.group({text:[""],voice:[""],rate:[1],pitch:[1],volume:[1]}),this.initSpeechRecognition()}ngOnInit(){this.loadVoices(),this.tts.speaking$.subscribe(r=>this.isSpeaking=r)}ngOnDestroy(){this.recognition&&this.recognition.abort()}loadVoices(){return M(this,null,function*(){let r=yield this.tts.getVoices();this.voices=r.sort((o,n)=>o.name.localeCompare(n.name)),this.voices.length&&!this.form.value.voice&&this.form.patchValue({voice:this.voices[0].voiceURI??this.voices[0].name})})}play(){let{text:r,voice:o,rate:n,pitch:l,volume:c}=this.form.value;!r||!r.trim()||this.tts.speak(r,{voiceUri:o,rate:n,pitch:l,volume:c})}pause(){this.tts.pause()}resume(){this.tts.resume()}stop(){this.tts.cancel()}useSample(r){this.form.patchValue({text:r})}download(){let{text:r,voice:o,rate:n,pitch:l}=this.form.value;this.tts.fetchAudio(r,{voiceUri:o,rate:n,pitch:l}).subscribe({next:c=>{let m=URL.createObjectURL(c),g=document.createElement("a");g.href=m,g.download="tts.wav",g.click(),URL.revokeObjectURL(m)},error:c=>{alert("Download is not configured for this demo. Provide a backend TTS endpoint at /api/tts to enable downloads.")}})}initSpeechRecognition(){let r=window.SpeechRecognition||window.webkitSpeechRecognition;r?(this.browserSupportsSpeechRecognition=!0,this.recognition=new r,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang=this.selectedLanguage,this.recognition.onstart=()=>{this.isRecording=!0},this.recognition.onresult=o=>{let n="",l="";for(let c=o.resultIndex;c<o.results.length;c++){let m=o.results[c][0].transcript,g=o.results[c][0].confidence;o.results[c].isFinal?(l+=m+" ",this.confidence=Math.round(g*100),this.isFinal=!0):n+=m}this.transcript=n,this.transcribedText=l||this.transcribedText},this.recognition.onerror=o=>{console.error("Speech recognition error:",o.error),alert(`Error: ${o.error}`)},this.recognition.onend=()=>{this.isRecording=!1}):this.browserSupportsSpeechRecognition=!1}toggleRecording(){this.recognition&&(this.isRecording?(this.recognition.stop(),this.isRecording=!1):(this.transcript="",this.isFinal=!1,this.confidence=0,this.recognition.lang=this.selectedLanguage,this.recognition.start(),this.isRecording=!0))}copyToClipboard(){this.transcribedText&&navigator.clipboard.writeText(this.transcribedText).then(()=>{alert("Copied to clipboard!")}).catch(()=>{alert("Failed to copy to clipboard")})}clearTranscript(){this.transcribedText="",this.transcript="",this.confidence=0,this.isFinal=!1}speakTranscript(){if(!this.transcribedText)return;let{voice:r,rate:o,pitch:n,volume:l}=this.form.value;this.tts.speak(this.transcribedText,{voiceUri:r,rate:o,pitch:n,volume:l})}};p.\u0275fac=function(o){return new(o||p)(b(D),b($))},p.\u0275cmp=C({type:p,selectors:[["app-stt"]],standalone:!0,features:[y],decls:54,vars:12,consts:[[1,"tts-card","stt-card"],[1,"stt-body"],[1,"microphone-section"],["class","recording-indicator",4,"ngIf"],[1,"recording-actions"],["mat-fab","",1,"mic-button",3,"click","color","disabled"],[1,"button-label"],["appearance","outline",1,"language-field"],[3,"ngModelChange","ngModel","disabled"],["value","en-US"],["value","en-GB"],["value","es-ES"],["value","fr-FR"],["value","de-DE"],["value","it-IT"],["value","ja-JP"],["value","zh-CN"],["value","hi-IN"],[1,"transcript-section"],["appearance","outline",1,"full-width"],["matInput","","rows","6","readonly","",3,"value"],["class","status-section",4,"ngIf"],[1,"actions"],["mat-raised-button","","color","accent",3,"click","disabled"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],["class","browser-support",4,"ngIf"],[1,"recording-indicator"],[1,"recording-dot"],[1,"status-section"],[1,"confidence-label"],["class","final-label",4,"ngIf"],["class","interim-label",4,"ngIf"],[1,"final-label"],[1,"interim-label"],[1,"browser-support"],[1,"warning-icon"]],template:function(o,n){o&1&&(t(0,"mat-card",0)(1,"h1"),i(2,"Speech to Text"),e(),t(3,"div",1)(4,"div",2),f(5,tt,4,0,"div",3),t(6,"div",4)(7,"button",5),u("click",function(){return n.toggleRecording()}),t(8,"mat-icon"),i(9),e()(),t(10,"span",6),i(11),e()(),t(12,"mat-form-field",7)(13,"mat-label"),i(14,"Language"),e(),t(15,"mat-select",8),w("ngModelChange",function(c){return v(n.selectedLanguage,c)||(n.selectedLanguage=c),c}),t(16,"mat-option",9),i(17,"English (US)"),e(),t(18,"mat-option",10),i(19,"English (UK)"),e(),t(20,"mat-option",11),i(21,"Spanish"),e(),t(22,"mat-option",12),i(23,"French"),e(),t(24,"mat-option",13),i(25,"German"),e(),t(26,"mat-option",14),i(27,"Italian"),e(),t(28,"mat-option",15),i(29,"Japanese"),e(),t(30,"mat-option",16),i(31,"Chinese (Simplified)"),e(),t(32,"mat-option",17),i(33,"Hindi"),e()()()(),t(34,"div",18)(35,"mat-form-field",19)(36,"mat-label"),i(37,"Transcribed Text"),e(),x(38,"textarea",20),e()(),f(39,it,7,3,"div",21),t(40,"div",22)(41,"button",23),u("click",function(){return n.copyToClipboard()}),t(42,"mat-icon"),i(43,"content_copy"),e(),i(44," Copy "),e(),t(45,"button",24),u("click",function(){return n.clearTranscript()}),t(46,"mat-icon"),i(47,"delete"),e(),i(48," Clear "),e(),t(49,"button",25),u("click",function(){return n.speakTranscript()}),t(50,"mat-icon"),i(51,"volume_up"),e(),i(52," Speak "),e()(),f(53,ot,5,0,"div",26),e()()),o&2&&(s(5),d("ngIf",n.isRecording),s(2),d("color",n.isRecording?"warn":"primary")("disabled",n.browserSupportsSpeechRecognition===!1),s(2),_(n.isRecording?"stop":"mic"),s(2),_(n.isRecording?"Stop Recording":"Start Recording"),s(4),S("ngModel",n.selectedLanguage),d("disabled",n.isRecording),s(23),d("value",n.transcribedText),s(),d("ngIf",n.transcript),s(2),d("disabled",!n.transcribedText),s(8),d("disabled",!n.transcribedText),s(4),d("ngIf",n.browserSupportsSpeechRecognition===!1))},dependencies:[T,k,V,B,N,A,J,H,G,K,Y,Q,q,E,Z,U,F,L,I,R,j,z,X,W],styles:[".tts-card[_ngcontent-%COMP%]{max-width:900px;margin:24px auto;padding:16px}.full-width[_ngcontent-%COMP%]{width:100%}.controls[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;margin-top:12px;align-items:center}.controls[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{min-width:240px;flex:1}.actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:14px;flex-wrap:wrap}.samples[_ngcontent-%COMP%]{margin-top:18px}.samples-title[_ngcontent-%COMP%]{font-weight:600;margin-bottom:6px}.sample-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:8px}.tts-card[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;min-height:140px;resize:vertical}.tts-card[_ngcontent-%COMP%]   .mat-flat-button.mat-primary[_ngcontent-%COMP%]{background-color:#ff9800!important;color:#fff!important}.tts-card[_ngcontent-%COMP%]   .mat-flat-button.mat-accent[_ngcontent-%COMP%]{background-color:#fb8c00!important;color:#fff!important}.tts-card[_ngcontent-%COMP%]   .mat-stroked-button[_ngcontent-%COMP%]{border-color:#ff9800!important;color:#ff9800!important}.tts-card[_ngcontent-%COMP%]   .mat-slider[_ngcontent-%COMP%]   .mat-slider-thumb[_ngcontent-%COMP%]{background-color:#ff9800!important;border-color:#ff9800!important}.tts-card[_ngcontent-%COMP%]   .mat-slider[_ngcontent-%COMP%]   .mat-slider-track-fill[_ngcontent-%COMP%]{background-color:#ff9800!important}.tts-card[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{color:#000}@media (max-width:600px){.controls[_ngcontent-%COMP%]{flex-direction:column}.small-number[_ngcontent-%COMP%]{width:100%}}.gradient-toolbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea33,#764ba233);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border-bottom:1px solid rgba(255,255,255,.15);color:#fff;box-shadow:0 8px 32px #1f26875e}.form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2em auto 0;width:100%}.stt-card[_ngcontent-%COMP%]{margin-top:32px!important}.stt-body[_ngcontent-%COMP%]{padding:24px;display:flex;flex-direction:column;gap:20px}.microphone-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px;padding:20px;background:#ffffff0d;border-radius:12px;border:1px solid rgba(255,255,255,.1)}.recording-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 20px;background:#f4433633;border:1px solid rgba(244,67,54,.4);border-radius:8px;color:#f44336;font-weight:600;animation:_ngcontent-%COMP%_pulse 1s infinite}.recording-dot[_ngcontent-%COMP%]{width:12px;height:12px;background:#f44336;border-radius:50%;animation:_ngcontent-%COMP%_blink .6s infinite}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:.5}}@keyframes _ngcontent-%COMP%_pulse{0%,to{box-shadow:0 0 #f4433666}50%{box-shadow:0 0 0 6px #f4433600}}.recording-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px}.mic-button[_ngcontent-%COMP%]{width:80px!important;height:80px!important;font-size:32px!important;transition:all .3s ease!important}.mic-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.1)!important;box-shadow:0 8px 24px #667eea66!important}.mic-button[_ngcontent-%COMP%]:disabled{opacity:.5!important;cursor:not-allowed!important}.button-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#fffc}.language-field[_ngcontent-%COMP%]{min-width:200px;max-width:300px}.transcript-section[_ngcontent-%COMP%]{width:100%}.transcript-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;min-height:140px;background:#ffffff0d;border:1px solid rgba(255,255,255,.15);border-radius:8px;padding:12px;color:#ffffffe6;font-family:Courier New,monospace;font-size:14px;resize:vertical}.status-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:12px 16px;background:#667eea1a;border-radius:8px;border-left:4px solid #667eea}.confidence-label[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#fffc}.confidence-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#667eea;font-size:16px}.final-label[_ngcontent-%COMP%], .interim-label[_ngcontent-%COMP%]{margin:0;font-size:13px;font-weight:500}.final-label[_ngcontent-%COMP%]{color:#4caf50}.interim-label[_ngcontent-%COMP%]{color:#ff9800;animation:_ngcontent-%COMP%_blink .6s infinite}.browser-support[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:#f4433626;border:1px solid rgba(244,67,54,.3);border-radius:8px;color:#f44336;margin-top:12px}.warning-icon[_ngcontent-%COMP%]{font-size:20px!important;width:20px!important;height:20px!important;flex-shrink:0}.browser-support[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px}.stt-body[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:8px;justify-content:center;gap:16px}.stt-body[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:140px;transition:all .3s ease}.stt-body[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 24px #667eea4d}@media (max-width: 600px){.microphone-section[_ngcontent-%COMP%]{gap:16px;padding:16px}.mic-button[_ngcontent-%COMP%]{width:70px!important;height:70px!important;font-size:28px!important}.language-field[_ngcontent-%COMP%]{max-width:100%}.stt-body[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{flex-direction:column}.stt-body[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]});let a=p;return a})();export{yt as SttComponent};
