import{a as W}from"./chunk-KBREYECZ.js";import{c as Q}from"./chunk-LRBTW7Q7.js";import{b as H,c as Y}from"./chunk-JDCC6IOV.js";import{e as k,f as y}from"./chunk-73HNPCUD.js";import{b as K}from"./chunk-OKHWQRQO.js";import{a as q,b as J}from"./chunk-HXXQPCWH.js";import"./chunk-ZHDJFP5C.js";import"./chunk-QBLI2EOF.js";import{a as R,h as F}from"./chunk-JX33CUBA.js";import{a as G,f as B,g as $}from"./chunk-I7QKGUOV.js";import"./chunk-KOH3MBIX.js";import{c as E,g as I,h as z,k as U,n as N,o as L,r as V,s as j,t as D}from"./chunk-KU7RIE3I.js";import"./chunk-AESYL7IM.js";import{a as S,e as T}from"./chunk-4JKAHWEK.js";import"./chunk-CERUL3HZ.js";import"./chunk-5BDAPURH.js";import{_ as v,fa as A}from"./chunk-TBDOALTL.js";import{$a as p,Fb as o,Gb as i,Hb as _,Ob as f,Rc as P,Zb as r,_c as w,ab as h,ac as C,f as b,gc as O,ma as x,tb as M,vb as d}from"./chunk-J5RJCK57.js";function X(l,c){if(l&1&&(o(0,"mat-option",13),r(1),i()),l&2){let u=c.$implicit;d("value",u.voiceURI||u.name),p(),C("",u.name," (",u.lang,")")}}var Ct=(()=>{let c=class c{constructor(e,t){this.fb=e,this.tts=t,this.voices=[],this.samples=["Hello! This is a sample text to demonstrate text to speech.","Angular makes building UIs productive and enjoyable.","Accessibility is important: provide text alternatives for audio content."],this.isSpeaking=!1,this.isRecording=!1,this.transcribedText="",this.transcript="",this.confidence=0,this.isFinal=!1,this.selectedLanguage="en-US",this.browserSupportsSpeechRecognition=null,this.form=this.fb.group({text:[""],voice:[""],rate:[1],pitch:[1],volume:[1]}),this.initSpeechRecognition()}ngOnInit(){this.loadVoices(),this.tts.speaking$.subscribe(e=>this.isSpeaking=e)}ngOnDestroy(){this.recognition&&this.recognition.abort()}loadVoices(){return b(this,null,function*(){let e=yield this.tts.getVoices();this.voices=e.sort((t,n)=>t.name.localeCompare(n.name)),this.voices.length&&!this.form.value.voice&&this.form.patchValue({voice:this.voices[0].voiceURI??this.voices[0].name})})}play(){let{text:e,voice:t,rate:n,pitch:a,volume:s}=this.form.value;!e||!e.trim()||this.tts.speak(e,{voiceUri:t,rate:n,pitch:a,volume:s})}pause(){this.tts.pause()}resume(){this.tts.resume()}stop(){this.tts.cancel()}useSample(e){this.form.patchValue({text:e})}download(){let{text:e,voice:t,rate:n,pitch:a}=this.form.value;this.tts.fetchAudio(e,{voiceUri:t,rate:n,pitch:a}).subscribe({next:s=>{let m=URL.createObjectURL(s),g=document.createElement("a");g.href=m,g.download="tts.wav",g.click(),URL.revokeObjectURL(m)},error:s=>{alert("Download is not configured for this demo. Provide a backend TTS endpoint at /api/tts to enable downloads.")}})}initSpeechRecognition(){let e=window.SpeechRecognition||window.webkitSpeechRecognition;e?(this.browserSupportsSpeechRecognition=!0,this.recognition=new e,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang=this.selectedLanguage,this.recognition.onstart=()=>{this.isRecording=!0},this.recognition.onresult=t=>{let n="",a="";for(let s=t.resultIndex;s<t.results.length;s++){let m=t.results[s][0].transcript,g=t.results[s][0].confidence;t.results[s].isFinal?(a+=m+" ",this.confidence=Math.round(g*100),this.isFinal=!0):n+=m}this.transcript=n,this.transcribedText=a||this.transcribedText},this.recognition.onerror=t=>{console.error("Speech recognition error:",t.error),alert(`Error: ${t.error}`)},this.recognition.onend=()=>{this.isRecording=!1}):this.browserSupportsSpeechRecognition=!1}toggleRecording(){this.recognition&&(this.isRecording?(this.recognition.stop(),this.isRecording=!1):(this.transcript="",this.isFinal=!1,this.confidence=0,this.recognition.lang=this.selectedLanguage,this.recognition.start(),this.isRecording=!0))}copyToClipboard(){this.transcribedText&&navigator.clipboard.writeText(this.transcribedText).then(()=>{alert("Copied to clipboard!")}).catch(()=>{alert("Failed to copy to clipboard")})}clearTranscript(){this.transcribedText="",this.transcript="",this.confidence=0,this.isFinal=!1}speakTranscript(){if(!this.transcribedText)return;let{voice:e,rate:t,pitch:n,volume:a}=this.form.value;this.tts.speak(this.transcribedText,{voiceUri:e,rate:t,pitch:n,volume:a})}};c.\u0275fac=function(t){return new(t||c)(h(V),h(W))},c.\u0275cmp=x({type:c,selectors:[["app-tts"]],standalone:!0,features:[O],decls:32,vars:4,consts:[[1,"tts-card","stt-card"],[3,"formGroup"],[1,"stt-body"],["appearance","outline",1,"full-width"],["matInput","","rows","6","formControlName","text"],[1,"controls"],["appearance","outline"],["formControlName","voice"],[3,"value",4,"ngFor","ngForOf"],[1,"actions"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","accent",3,"click","disabled"],["mat-stroked-button","",3,"click"],[3,"value"]],template:function(t,n){t&1&&(o(0,"mat-card",0)(1,"h1"),r(2,"Text to Speech"),i(),o(3,"form",1)(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),r(7,"Enter text"),i(),_(8,"textarea",4),i(),o(9,"div",5)(10,"mat-form-field",6)(11,"mat-label"),r(12,"Voice"),i(),o(13,"mat-select",7),M(14,X,2,3,"mat-option",8),i()()(),o(15,"div",9)(16,"button",10),f("click",function(){return n.play()}),o(17,"mat-icon"),r(18,"play_arrow"),i(),r(19," Play "),i(),o(20,"button",11),f("click",function(){return n.pause()}),o(21,"mat-icon"),r(22,"pause"),i(),r(23," Pause "),i(),o(24,"button",11),f("click",function(){return n.resume()}),o(25,"mat-icon"),r(26,"play_circle"),i(),r(27," Resume "),i(),o(28,"button",12),f("click",function(){return n.stop()}),o(29,"mat-icon"),r(30,"stop"),i(),r(31," Stop "),i()()()()()),t&2&&(p(3),d("formGroup",n.form),p(11),d("ngForOf",n.voices),p(6),d("disabled",!n.isSpeaking),p(4),d("disabled",n.isSpeaking))},dependencies:[w,P,j,U,E,I,z,D,N,L,$,B,G,Y,H,J,q,v,Q,T,S,y,k,F,R,K,A],styles:[".tts-card[_ngcontent-%COMP%]{max-width:900px;margin:24px auto;padding:16px}.full-width[_ngcontent-%COMP%]{width:100%}.controls[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;margin-top:12px;align-items:center}.controls[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{min-width:240px;flex:1}.actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:14px;flex-wrap:wrap}.samples[_ngcontent-%COMP%]{margin-top:18px}.samples-title[_ngcontent-%COMP%]{font-weight:600;margin-bottom:6px}.sample-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:8px}.tts-card[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;min-height:140px;resize:vertical}.tts-card[_ngcontent-%COMP%]     .mat-flat-button.mat-primary{background-color:#667eea!important;color:#fff!important;transition:all .3s ease!important}.tts-card[_ngcontent-%COMP%]     .mat-flat-button.mat-primary:hover:not(:disabled){background:linear-gradient(135deg,#667eea,#764ba2)!important;box-shadow:0 8px 24px #667eea66!important}.tts-card[_ngcontent-%COMP%]     .mat-flat-button.mat-accent{background-color:#764ba2!important;color:#fff!important;transition:all .3s ease!important}.tts-card[_ngcontent-%COMP%]     .mat-flat-button.mat-accent:hover:not(:disabled){background:linear-gradient(135deg,#764ba2,#667eea)!important;box-shadow:0 8px 24px #764ba266!important}.tts-card[_ngcontent-%COMP%]     .mat-stroked-button{border-color:#667eea!important;color:#667eea!important;transition:all .3s ease!important}.tts-card[_ngcontent-%COMP%]     .mat-stroked-button:hover:not(:disabled){background:#667eea26!important;border-color:#764ba2!important;color:#764ba2!important;box-shadow:0 4px 16px #667eea4d!important}.tts-card[_ngcontent-%COMP%]     .mat-slider .mat-slider-thumb{background-color:#667eea!important;border-color:#667eea!important}.tts-card[_ngcontent-%COMP%]     .mat-slider .mat-slider-track-fill{background-color:#667eea!important}.tts-card[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{color:#000}@media (max-width:600px){.controls[_ngcontent-%COMP%]{flex-direction:column}.small-number[_ngcontent-%COMP%]{width:100%}}.gradient-toolbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea33,#764ba233);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border-bottom:1px solid rgba(255,255,255,.15);color:#fff;box-shadow:0 8px 32px #1f26875e}.form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2em auto 0;width:100%}.stt-card[_ngcontent-%COMP%]{margin-top:32px!important}.stt-body[_ngcontent-%COMP%]{padding:24px;display:flex;flex-direction:column;gap:20px}.microphone-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px;padding:20px;background:#ffffff0d;border-radius:12px;border:1px solid rgba(255,255,255,.1)}.recording-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 20px;background:#f4433633;border:1px solid rgba(244,67,54,.4);border-radius:8px;color:#f44336;font-weight:600;animation:_ngcontent-%COMP%_pulse 1s infinite}.recording-dot[_ngcontent-%COMP%]{width:12px;height:12px;background:#f44336;border-radius:50%;animation:_ngcontent-%COMP%_blink .6s infinite}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:.5}}@keyframes _ngcontent-%COMP%_pulse{0%,to{box-shadow:0 0 #f4433666}50%{box-shadow:0 0 0 6px #f4433600}}.recording-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px}.mic-button[_ngcontent-%COMP%]{width:80px!important;height:80px!important;font-size:32px!important;transition:all .3s ease!important}.mic-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.1)!important;box-shadow:0 8px 24px #667eea66!important}.mic-button[_ngcontent-%COMP%]:disabled{opacity:.5!important;cursor:not-allowed!important}.button-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#fffc}.language-field[_ngcontent-%COMP%]{min-width:200px;max-width:300px}.transcript-section[_ngcontent-%COMP%]{width:100%}.transcript-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;min-height:140px;background:#ffffff0d;border:1px solid rgba(255,255,255,.15);border-radius:8px;padding:12px;color:#ffffffe6;font-family:Courier New,monospace;font-size:14px;resize:vertical}.status-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:12px 16px;background:#667eea1a;border-radius:8px;border-left:4px solid #667eea}.confidence-label[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#fffc}.confidence-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#667eea;font-size:16px}.final-label[_ngcontent-%COMP%], .interim-label[_ngcontent-%COMP%]{margin:0;font-size:13px;font-weight:500}.final-label[_ngcontent-%COMP%]{color:#4caf50}.interim-label[_ngcontent-%COMP%]{color:#ff9800;animation:_ngcontent-%COMP%_blink .6s infinite}.browser-support[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:#f4433626;border:1px solid rgba(244,67,54,.3);border-radius:8px;color:#f44336;margin-top:12px}.warning-icon[_ngcontent-%COMP%]{font-size:20px!important;width:20px!important;height:20px!important;flex-shrink:0}.browser-support[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px}.stt-body[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:8px;justify-content:center;gap:16px}.stt-body[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:140px;transition:all .3s ease}.stt-body[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 24px #667eea4d}@media (max-width: 600px){.microphone-section[_ngcontent-%COMP%]{gap:16px;padding:16px}.mic-button[_ngcontent-%COMP%]{width:70px!important;height:70px!important;font-size:28px!important}.language-field[_ngcontent-%COMP%]{max-width:100%}.stt-body[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{flex-direction:column}.stt-body[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]});let l=c;return l})();export{Ct as TtsComponent};
